(()=>{"use strict";var e={19:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.DeadCodeTreeProvider=t.DeadCodeTreeItem=t.DeadCodeTreeItemType=void 0,t.registerDeadCodeTreeView=function(e){const t=new f,n=s.window.createTreeView("deadCodeExplorer",{treeDataProvider:t,showCollapseAll:!0});return e.subscriptions.push(n),{treeDataProvider:t,treeView:n}};const s=a(n(398)),c=a(n(928)),l=n(407);var u;!function(e){e[e.FILE=0]="FILE",e[e.DEAD_CODE_ITEM=1]="DEAD_CODE_ITEM"}(u||(t.DeadCodeTreeItemType=u={}));class d extends s.TreeItem{label;type;deadCodeItem;children;constructor(e,t,n,r=[]){super(e,t===u.FILE?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.None),this.label=e,this.type=t,this.deadCodeItem=n,this.children=r,t===u.FILE?(this.iconPath={light:c.join(__filename,"..","..","..","resources","light","file.svg"),dark:c.join(__filename,"..","..","..","resources","dark","file.svg")},this.description=""):n&&(this.iconPath={light:c.join(__filename,"..","..","..","resources","light","method.svg"),dark:c.join(__filename,"..","..","..","resources","dark","method.svg")},this.description=`${n.type} (${n.confidence}% confidence)`,this.tooltip=n.details||`${n.type} '${n.name}' at line ${n.lineNumber}`,this.command={title:"Open Dead Code",command:"deadCodeFinder.openDeadCode",arguments:[n]}),this.contextValue=t===u.DEAD_CODE_ITEM?"deadCodeItem":"file"}}t.DeadCodeTreeItem=d;class f{_onDidChangeTreeData=new s.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_items=[];_treeItems=[];refresh(e=[]){l.Logger.debug(`Refreshing DeadCodeTreeProvider with ${e.length} items`),this._items=e,this._treeItems=this.buildTreeItems(e),this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){return e?Promise.resolve(e.children):Promise.resolve(this._treeItems)}getItems(){return this._items}buildTreeItems(e){const t=new Map;for(const n of e){const e=n.filePath;t.has(e)||t.set(e,[]),t.get(e).push(n)}const n=[];return t.forEach(((e,t)=>{const r=[];e.sort(((e,t)=>e.lineNumber-t.lineNumber));for(const t of e)r.push(new d(t.name,u.DEAD_CODE_ITEM,t));const o=new d(c.basename(t),u.FILE,void 0,r);o.description=c.dirname(t),n.push(o)})),n.sort(((e,t)=>e.label.localeCompare(t.label))),n}}t.DeadCodeTreeProvider=f},85:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerNavigationCommands=function(e){const t=s.commands.registerCommand("deadCodeFinder.openDeadCode",(async e=>{await async function(e){try{c.Logger.info(`Opening file at line ${e.lineNumber}: ${e.filePath}`);const t=s.Uri.file(e.filePath),n=await s.workspace.openTextDocument(t),r=await s.window.showTextDocument(n),o=Math.max(0,e.lineNumber-1),i=n.lineAt(o).range;r.revealRange(i,s.TextEditorRevealType.InCenter),r.selection=new s.Selection(i.start,i.end)}catch(e){c.Logger.error("Error opening dead code location",e),s.window.showErrorMessage(`Error opening file: ${e.message}`)}}(e)}));e.subscriptions.push(t);const n=s.commands.registerCommand("deadCodeFinder.openSettings",(async()=>{await async function(){c.Logger.info("Opening Dead Code Finder settings"),await s.commands.executeCommand("workbench.action.openSettings","deadCodeFinder")}()}));e.subscriptions.push(n)};const s=a(n(398)),c=n(407)},90:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerWhitelistCommands=function(e,t){const n=s.commands.registerCommand("deadCodeFinder.generateWhitelist",(async()=>{await async function(e){try{const t=e();if(0===t.length)return void s.window.showInformationMessage("No dead code items to whitelist. Run an analysis first.");l.Logger.info(`Generating whitelist for ${t.length} items`),await(0,c.generateWhitelist)(t)}catch(e){l.Logger.error("Error generating whitelist",e),s.window.showErrorMessage(`Error generating whitelist: ${e.message}`)}}(t)}));e.subscriptions.push(n);const r=s.commands.registerCommand("deadCodeFinder.whitelistItem",(async e=>{await async function(e){try{l.Logger.info(`Whitelisting item: ${e.name}`),await(0,c.generateWhitelist)([e])}catch(t){l.Logger.error(`Error whitelisting item: ${e.name}`,t),s.window.showErrorMessage(`Error whitelisting item: ${t.message}`)}}(e)}));e.subscriptions.push(r)};const s=a(n(398)),c=n(402),l=n(407)},265:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){c.Logger.initialize(e),c.Logger.info("Activating Dead Code Finder extension"),(0,g.initDiagnosticsProvider)(e);let t=[];const{treeDataProvider:n}=(0,l.registerDeadCodeTreeView)(e);(0,u.registerAnalyzeCommand)(e,(e=>{t=e,n.refresh(e),s.workspace.getConfiguration("deadCodeFinder").get("showDiagnostics",!0)?(0,g.updateDiagnostics)(e):(0,g.clearDiagnostics)()})),(0,d.registerNavigationCommands)(e),(0,f.registerWhitelistCommands)(e,(()=>t));const r=s.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("deadCodeFinder")){const n=s.workspace.getConfiguration("deadCodeFinder"),r=n.get("logLevel","info");c.Logger.info(`Configuration changed, updating log level to ${r}`),e.affectsConfiguration("deadCodeFinder.showDiagnostics")&&(n.get("showDiagnostics",!0)?(0,g.updateDiagnostics)(t):(0,g.clearDiagnostics)())}}));e.subscriptions.push(r),s.workspace.getConfiguration("deadCodeFinder").get("enableAutoAnalysis",!1)&&function(e){const t=s.workspace.onDidSaveTextDocument((e=>{"python"===e.languageId&&s.workspace.getConfiguration("deadCodeFinder").get("enableAutoAnalysis",!1)&&(c.Logger.debug(`Auto-analyzing file: ${e.fileName}`),s.commands.executeCommand("deadCodeFinder.analyzeFile"))}));e.subscriptions.push(t)}(e),c.Logger.info("Dead Code Finder extension activated")},t.deactivate=function(){(0,g.clearDiagnostics)(),c.Logger.info("Deactivating Dead Code Finder extension")};const s=a(n(398)),c=n(407),l=n(19),u=n(703),d=n(85),f=n(90),g=n(973)},282:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.isVultureInstalled=f,t.installVulture=async function(){try{return u.Logger.info("Installing Vulture..."),await s.window.withProgress({location:s.ProgressLocation.Notification,title:"Installing Vulture...",cancellable:!1},(async e=>{e.report({increment:0,message:"Starting installation..."});let t=await(0,l.executePythonCommand)(["-m","pip","install","vulture","--user"]);0!==t.code&&(e.report({increment:30,message:"Trying alternate installation method..."}),t=await(0,l.executePythonCommand)(["-m","pip3","install","vulture","--user"])),e.report({increment:70,message:"Verifying installation..."});const n=await f();return 0===t.code&&n?(e.report({increment:100,message:"Installation complete"}),u.Logger.info("Vulture installed successfully"),s.window.showInformationMessage("Vulture installed successfully"),!0):(u.Logger.error(`Failed to install Vulture: ${t.stderr}`),s.window.showErrorMessage("Failed to install Vulture automatically. Please try installing manually with 'pip install vulture' in your terminal.","Open Terminal").then((e=>{if("Open Terminal"===e){const e=s.window.createTerminal("Vulture Installation");e.show(),e.sendText("pip install vulture --user")}})),!1)}))}catch(e){return u.Logger.error("Error installing Vulture",e),s.window.showErrorMessage(`Error installing Vulture: ${e.message}. Please try installing manually with 'pip install vulture'.`),!1}},t.runVultureAnalysis=async function(e,t=60){const n={deadCodeItems:[],errors:[],warnings:[],success:!1};try{const r=["-m","vulture","--min-confidence",t.toString(),...e],o=s.workspace.getConfiguration("deadCodeFinder").get("whitelistFile");o&&c.existsSync(o)&&r.push(o),u.Logger.debug(`Running Vulture with args: ${r.join(" ")}`);const i=await(0,l.executePythonCommand)(r);return 0!==i.code&&3!==i.code?(n.errors.push(`Vulture exited with code ${i.code}`),i.stderr&&n.errors.push(i.stderr),n):(n.deadCodeItems=g(i),n.success=!0,u.Logger.info(`Vulture found ${n.deadCodeItems.length} dead code items`),n)}catch(e){const t=e;return n.errors.push(t.message),u.Logger.error("Error running Vulture analysis",t),n}},t.parseVultureOutput=g;const s=a(n(398)),c=a(n(896)),l=n(483),u=n(407),d=/^(.+):(\d+): unused (.+) '(.+)' \((\d+)% confidence\)$/;async function f(){try{return 0===(await(0,l.executePythonCommand)(["-m","pip","show","vulture"])).code}catch(e){return!1}}function g(e){const t=[];if(!e.stdout)return t;const n=e.stdout.split("\n");for(const e of n){if(!e.trim())continue;const n=e.match(d);if(n){const[r,o,i,a,s,c]=n;t.push({filePath:o,lineNumber:parseInt(i,10),name:s,type:a,confidence:parseInt(c,10),details:e})}else u.Logger.debug(`Could not parse Vulture output line: ${e}`)}return t}},317:e=>{e.exports=require("child_process")},398:e=>{e.exports=require("vscode")},402:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_WHITELIST_FILENAME=void 0,t.generateWhitelistEntry=d,t.generateWhitelist=async function(e,n){try{const r=s.workspace.getConfiguration("deadCodeFinder"),o=n||r.get("whitelistFile");if(!o){const n=s.workspace.workspaceFolders;if(!n)return void s.window.showErrorMessage("No workspace folder open");const r=s.Uri.file(l.join(n[0].uri.fsPath,t.DEFAULT_WHITELIST_FILENAME)),o=await s.window.showSaveDialog({defaultUri:r,filters:{"Python Files":["py"]},title:"Save Whitelist File"});if(!o)return;return f(e,o.fsPath)}return f(e,o)}catch(e){return u.Logger.error("Error generating whitelist",e),void s.window.showErrorMessage(`Error generating whitelist: ${e.message}`)}};const s=a(n(398)),c=a(n(896)),l=a(n(928)),u=n(407);function d(e){const t=e.filePath,n=l.extname(t);return`from ${t.substring(0,t.length-n.length).replace(/[\/\\]/g,".")} import ${e.name}\n${e.name}\n`}async function f(e,t){try{let n="# Whitelist for Vulture\n";n+="# Generated by Dead Code Finder VSCode extension\n\n";const r=new Map;for(const t of e)r.set(t.name,t);for(const e of r.values())n+=d(e);return c.writeFileSync(t,n,"utf8"),u.Logger.info(`Generated whitelist at ${t}`),s.window.showInformationMessage(`Whitelist generated at ${t}`),t}catch(e){throw u.Logger.error(`Error writing whitelist to ${t}`,e),e}}t.DEFAULT_WHITELIST_FILENAME="whitelist.py"},407:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LogLevel=void 0;const s=a(n(398));var c;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(c||(t.LogLevel=c={}));class l{static _outputChannel;static _logLevel=c.INFO;static initialize(e){this._outputChannel=s.window.createOutputChannel("Dead Code Finder"),e.subscriptions.push(this._outputChannel);const t=s.workspace.getConfiguration("deadCodeFinder").get("logLevel","info");this._logLevel=this.getLogLevelFromString(t)}static setLogLevel(e){this._logLevel=e}static debug(e){this.log(c.DEBUG,e)}static info(e){this.log(c.INFO,e)}static warn(e){this.log(c.WARN,e)}static error(e,t){let n=e;t&&(n+=`\n${t.message}`,t.stack&&(n+=`\n${t.stack}`)),this.log(c.ERROR,n)}static log(e,t){if(e<this._logLevel)return;this._outputChannel||(this._outputChannel=s.window.createOutputChannel("Dead Code Finder"));const n=`[${(new Date).toISOString()}] [${c[e]}] ${t}`;this._outputChannel.appendLine(n)}static getLogLevelFromString(e){switch(e.toLowerCase()){case"debug":return c.DEBUG;case"info":default:return c.INFO;case"warn":case"warning":return c.WARN;case"error":return c.ERROR}}static show(){this._outputChannel.show()}}t.Logger=l},483:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.executeCommand=l,t.isCommandAvailable=async function(e){try{const t="win32"===process.platform?"where":"which",n=[e];return 0===(await l(t,n)).code}catch(e){return!1}},t.executePythonCommand=async function(e,t={}){const n=c.workspace.getConfiguration("python"),r=[n.get("defaultInterpreterPath")||"python","python","python3","/usr/bin/python3","/usr/bin/python","/usr/local/bin/python3","/usr/local/bin/python"];"win32"===process.platform?r.push("C:\\Python39\\python.exe","C:\\Python310\\python.exe","C:\\Python311\\python.exe"):"darwin"===process.platform&&r.push("/opt/homebrew/bin/python3","/opt/local/bin/python3"),process.env.VIRTUAL_ENV&&r.unshift(`${process.env.VIRTUAL_ENV}/bin/python`,`${process.env.VIRTUAL_ENV}/Scripts/python.exe`);for(const o of r)try{const r=await l(o,e,t);if(0===r.code||3===r.code||r.stdout.length>0){if(o.startsWith("/")||o.startsWith("C:\\")||!o.includes("/"))try{n.update("defaultInterpreterPath",o,c.ConfigurationTarget.Global)}catch(e){}return r}}catch(e){}if(process.env.HOME){const r=[];"win32"!==process.platform&&r.push(`${process.env.HOME}/.pyenv/shims/python`,`${process.env.HOME}/.pyenv/shims/python3`);for(const o of r)try{const r=await l(o,e,t);if(0===r.code||3===r.code||r.stdout.length>0){try{n.update("defaultInterpreterPath",o,c.ConfigurationTarget.Global)}catch(e){}return r}}catch(e){}}return{stdout:"",stderr:"Failed to execute Python command. Could not find a working Python interpreter with required packages.",code:null}};const s=a(n(317)),c=a(n(398));async function l(e,t,n={}){return new Promise((r=>{const o=s.spawn(e,t,n);let i="",a="";o.stdout?.on("data",(e=>{i+=e.toString()})),o.stderr?.on("data",(e=>{a+=e.toString()})),o.on("close",(e=>{r({stdout:i,stderr:a,code:e})})),o.on("error",(e=>{a+=e.message,r({stdout:i,stderr:a,code:null})}))}))}},703:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerAnalyzeCommand=function(e,t){u=s.window.createStatusBarItem(s.StatusBarAlignment.Left,100),u.text="$(search) Find Dead Code",u.command="deadCodeFinder.analyze",u.tooltip="Find unused methods and functions in your code",e.subscriptions.push(u),u.show();const n=s.commands.registerCommand("deadCodeFinder.analyze",(async()=>{await d(t)}));e.subscriptions.push(n);const r=s.commands.registerCommand("deadCodeFinder.analyzeFile",(async()=>{const e=s.window.activeTextEditor;e?await f(e.document.uri.fsPath,t):s.window.showWarningMessage("No active file to analyze")}));e.subscriptions.push(r)},t.analyzeWorkspace=d,t.analyzeFile=f;const s=a(n(398)),c=n(811),l=n(407);let u;async function d(e){try{l.Logger.info("Starting workspace analysis"),h("$(sync~spin) Analyzing workspace...");const t=await c.PythonAnalyzer.getWorkspacePythonFiles();if(0===t.length)return s.window.showInformationMessage("No Python files found in workspace"),void h("$(search) Find Dead Code");l.Logger.debug(`Found ${t.length} Python files to analyze`),await g(t,e)}catch(e){l.Logger.error("Error analyzing workspace",e),s.window.showErrorMessage(`Error analyzing workspace: ${e.message}`),h("$(search) Find Dead Code")}}async function f(e,t){try{l.Logger.info(`Starting analysis of file: ${e}`),h(`$(sync~spin) Analyzing ${e}...`),await g([e],t)}catch(t){l.Logger.error(`Error analyzing file ${e}`,t),s.window.showErrorMessage(`Error analyzing file: ${t.message}`),h("$(search) Find Dead Code")}}async function g(e,t){if(0===e.length)return s.window.showInformationMessage("No paths to analyze"),void h("$(search) Find Dead Code");try{const n=new c.PythonAnalyzer,r=await n.analyze(e);if(!r.success)return r.errors.length>0?s.window.showErrorMessage(`Analysis failed: ${r.errors.join(", ")}`):s.window.showErrorMessage("Analysis failed"),void h("$(search) Find Dead Code");if(0===r.deadCodeItems.length)return s.window.showInformationMessage("No dead code found"),h("$(check) No dead code found"),setTimeout((()=>{h("$(search) Find Dead Code")}),3e3),void t([]);h(`$(alert) Found ${r.deadCodeItems.length} dead code items`),t(r.deadCodeItems)}catch(e){l.Logger.error("Error analyzing paths",e),s.window.showErrorMessage(`Error during analysis: ${e.message}`),h("$(search) Find Dead Code")}}function h(e){u.text=e}},811:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.PythonAnalyzer=void 0;const s=a(n(398)),c=a(n(928)),l=n(282),u=n(407);t.PythonAnalyzer=class{getLanguageId(){return"python"}async isAvailable(){if(!await(0,l.isVultureInstalled)()){const e="Vulture is not installed. Would you like to install it?",t="Install",n="Manual Install",r="Show Instructions",o="Cancel",i=await s.window.showWarningMessage(e,t,n,r,o);if(i===t)return await this.installDependencies()||s.window.showErrorMessage("Automatic installation failed. Please try installing manually."),await(0,l.isVultureInstalled)();if(i===n){const e=s.window.createTerminal("Vulture Installation");return e.show(),e.sendText("pip install vulture --user"),s.window.showInformationMessage("After installation completes, please try analyzing again."),!1}return i===r&&(s.window.showInformationMessage("To install Vulture manually:\n\n1. Open a terminal\n2. Run: pip install vulture --user\n3. Restart VS Code\n\nIf that doesn't work, try with pip3 instead of pip."),!1)}return!0}async installDependencies(){return(0,l.installVulture)()}async analyze(e){if(!await this.isAvailable())return{deadCodeItems:[],errors:["Vulture is not installed. Please install it to use the Python analyzer."],warnings:[],success:!1};const t=s.workspace.getConfiguration("deadCodeFinder").get("minConfidence",60);return(0,l.runVultureAnalysis)(e,t)}getDeadCodeUri(e){return s.Uri.file(e.filePath)}getDeadCodeRange(e){const t=e.lineNumber-1;return new s.Range(t,0,t,0)}dispose(){}static async getWorkspacePythonFiles(){const e=[],t=s.workspace.workspaceFolders;if(!t)return e;const n=s.workspace.getConfiguration("deadCodeFinder").get("excludePatterns",["**/venv/**","**/node_modules/**","**/.*/**"]),r=n.length>0?`{${n.join(",")}}`:null;u.Logger.debug(`Using exclude pattern: ${r}`);for(const n of t)try{const t=new s.RelativePattern(n,"**/*.py"),o=await s.workspace.findFiles(t,r);for(const t of o)e.push(t.fsPath)}catch(e){u.Logger.error(`Error finding Python files in ${n.name}`,e)}return e}static async getPythonFilesInFolder(e){try{const t=s.workspace.getWorkspaceFolder(s.Uri.file(e));if(!t)return[];const n=s.workspace.getConfiguration("deadCodeFinder").get("excludePatterns",["**/venv/**","**/node_modules/**","**/.*/**"]),r=n.length>0?`{${n.join(",")}}`:null,o=new s.RelativePattern(t,c.join(c.relative(t.uri.fsPath,e),"**/*.py"));return(await s.workspace.findFiles(o,r)).map((e=>e.fsPath))}catch(t){return u.Logger.error(`Error finding Python files in ${e}`,t),[]}}}},896:e=>{e.exports=require("fs")},928:e=>{e.exports=require("path")},973:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.initDiagnosticsProvider=function(e){l=s.languages.createDiagnosticCollection("deadCodeFinder"),e.subscriptions.push(l),c.Logger.debug("Diagnostics provider initialized")},t.updateDiagnostics=function(e){l.clear();const t=new Map;for(const n of e)t.has(n.filePath)||t.set(n.filePath,[]),t.get(n.filePath).push(n);t.forEach(((e,t)=>{const n=[];for(const t of e){const e=Math.max(0,t.lineNumber-1),o=new s.Range(e,0,e,Number.MAX_SAFE_INTEGER),i=new s.Diagnostic(o,`Unused ${t.type}: '${t.name}' (${t.confidence}% confidence)`,(r=t.confidence)>=90?s.DiagnosticSeverity.Warning:r>=70?s.DiagnosticSeverity.Information:s.DiagnosticSeverity.Hint);i.code="dead-code",i.source="Dead Code Finder",t.details&&(i.relatedInformation=[new s.DiagnosticRelatedInformation(new s.Location(s.Uri.file(t.filePath),o),t.details)]),n.push(i)}var r;l.set(s.Uri.file(t),n)})),c.Logger.debug(`Updated diagnostics for ${e.length} items across ${t.size} files`)},t.clearDiagnostics=function(){l.clear(),c.Logger.debug("Cleared all diagnostics")};const s=a(n(398)),c=n(407);let l}},t={},n=function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(265);module.exports=n})();